# 下一代繁體中文學術寫作系統：UI/UX 規劃與技術架構深度報告

## 1. 執行摘要

在當前的數位產品開發領域中，使用者介面（User Interface, UI）與使用者體驗（User Experience, UX）的規劃正經歷一場前所未有的典範轉移。隨著大型語言模型（LLM）與「代理人」（Agentic）工作流的成熟，軟體設計的核心已從單純的「指令輸入與反饋」轉向「意圖理解與協作執行」。

本報告旨在為開發一套針對「繁體中文優先」（Traditional Chinese First）的學術寫作與書目管理生態系統，提供全面性的技術架構與策略分析。我們整合了 Apple iOS 18 與 macOS Sequoia 的最新人機介面指南（HIG）、Cursor 等先進程式碼編輯器的互動模式，以及針對學術與專業寫作環境的排版研究。

報告分為三大部分：

1. **使用者體驗與介面設計**：探討如何利用「流體智力」視覺特徵與非模態互動解決 AI 信任問題，並針對繁體中文閱讀體驗進行排版優化。
2. **AI 核心與書目系統**：深入分析繁體中文在 LLM 代幣化與術語適配上的挑戰，並提出基於 CSL-JSON 的通用書目交換架構。
3. **技術架構與實作**：結合 SwiftUI/Metal 前端優化與 Actor 模型並發處理，構建高效且隱私安全的系統藍圖。

---

# 第一部：使用者體驗與介面設計 (UI/UX Design)

## 2. 智能時代的視覺語言：從靜態狀態到流體感知

在生成式 AI 整合至作業系統層級的趨勢下，傳統的系統狀態指示器已不足以表達 AI 的複雜運算狀態。使用者需要感知到的不僅是「系統正在載入」，而是「系統正在思考、處理語境並準備生成」。

### 2.1 「光」作為智能的隱喻

Apple 在最新設計語言中確立了以「輝光」（Glow）作為智能核心隱喻的標準。

#### 2.1.1 邊緣輝光的心理學與功能

當使用者啟動 AI 工具時，螢幕邊緣泛起的流動虹彩光暈解決了兩個核心 UX 問題：

1. **非阻斷式的狀態感知**：邊緣輝光像是一個「容器」，暗示 AI 正在讀取當前螢幕內容作為上下文（Context），但不會像傳統模態對話框那樣打斷使用者的工作流。
2. **擬人化的生命力**：透過多層次的模糊與動態漸層（Gradient Animation），光效模仿了生物的呼吸節奏，有效降低使用者等待時的焦慮感。

#### 2.1.2 模態流動性（Modality Fluidity）

系統應支援「情境覆蓋」（Contextual Overlay），允許 AI 介入當前的任務焦點。這種介入必須是「黏性」的——即 AI 的回應應緊貼於使用者的游標或選取範圍附近，而非遠離焦點區域。

### 2.2 代理人狀態的可視化 (Agentic State Visualization)

隨著 AI 演進為能執行多步驟任務的「代理人」（Agent），UI 必須能可視化其「推理鏈」（Chain of Thought）。

#### 2.2.1 過程透明化

理想的 UI 模式應採用「漸進式揭露」（Progressive Disclosure）：

* **宏觀狀態**：使用簡短標籤（如「正在規劃行程...」）。
* **微觀日誌**：提供可展開的日誌區域，顯示 AI 調用了哪些工具或檢索了哪些文檔。
* **錯誤恢復**：顯示「自我修正中」狀態，或主動請求使用者協助（Human-in-the-loop）。

#### 2.2.2 確定性與非確定性指標的混合使用

對於包含明確步驟的任務（如：讀取文件 -> 提取摘要 -> 生成報告），應混合使用步驟條（Step Indicator）與脈衝動畫，讓使用者感知具體進展。

> [!NOTE]
> **監督者模式 (Governor Pattern)**：即便代理人具備自主權，UI 設計仍需保留顯眼的「停止」按鈕，賦予使用者隨時中斷任務的權利，這是建立信任的核心。

## 3. 編輯器的進化：從輸入工具到協作畫布

### 3.1 「寫作工具」模式 (Writing Tools Pattern)

核心在於「原地變更」（In-place Transformation）：

1. **非破壞性預覽**：AI 生成的新文本透過動畫過渡顯示預覽，不立即覆蓋原文。
2. **比較與還原**：提供「原始版本」與「重寫版本」的快速切換，支援 A/B 測試。
3. **流體動畫**：文字替換伴隨平滑形變動畫，減少「變更盲視」。

### 3.2 程式碼與技術寫作：Gutter 互動範式

借鑑 Cursor 編輯器，利用「溝槽」（行號區域）作為 AI 互動錨點：

* **行內差異比對 (Inline Diff)**：直接在行間展開差異視圖，紅色背景表示刪除，綠色表示新增。
* **鍵盤優先**：透過 `Cmd+Enter` 接受，`Esc` 拒絕，提升審閱速度。

> [!IMPORTANT]
> **互動模式權衡**：在快速打字時使用「幽靈文字」（Ghost Text）進行補全；在重構或編輯時使用「區塊差異」（Diff Block）進行比對。

## 4. 繁體中文排版工藝與易讀性工程

針對 CJK 字元的高視覺密度特徵，傳統西文排版規則已不適用。

### 4.1 字體選擇戰略

* **原生 App**：優先使用 **PingFang TC (蘋果儷中黑)**，其中黑 (Medium) 字重在 Retina 螢幕表現極佳。
* **長文閱讀**：建議引入 **Noto Serif TC (思源宋體)**，並適當增加字重以確保深色模式下的可讀性。

### 4.2 閱讀物理學

* **行高 (Line Height)**：CJK 標準應設定為字級的 **1.5x - 2.0x**（推薦 1.6x），避免文字牆效應。
* **字級 (Font Size)**：針對 45 歲以上使用者，最佳閱讀字級為 **17px - 20px**。
* **漢拉間隙 (Han-La Gap)**：漢字與西文之間應自動加入約 **1/4 個全形空白**的間距。

---

# 第二部：AI 核心與書目系統 (AI Core & Bibliography)

## 5. 繁體中文優先的智慧化語言模型架構

核心挑戰在於讓 AI 真正「理解」繁體中文學術語境，而非僅視為簡體中文的轉換版本。

### 5.1 代幣化與語義適配

* **代幣化挑戰**：簡體中文 Tokenizer 效率較高，導致繁體中文被分割得更碎，稀釋上下文窗口。
* **詞彙漂移**：避免「信息」（Information）、「軟件」（Software）等大陸用語，應強制轉換為台灣學術規範的「資訊」、「軟體」。

### 5.2 模型選擇與提示工程

* **本地模型**：利用 Apple `FoundationModels` 框架或微調後的 `Llama-3-Taiwan` 模型，保障隱私與在地化用語。
* **術語防火牆 (Terminology Firewall)**：實作輕量級 RAG-Lite 機制，在輸入 LLM 前掃描並校正關鍵術語（如表 1.1 所示）。

| **概念領域** | **簡體/大陸用語 (Avoid)** | **繁體/台灣用語 (Prefer)** |
| --- | --- | --- |
| 資訊科技 | 軟件、信息、互聯網、視頻 | 軟體、資訊、網際網路、影片 |
| 物理/工程 | 質量 (Quality) | 品質 |

### 5.3 學術語料庫與寫作引導

內建基於國立臺灣大學（NTU）及香港大學（HKU）資源的學術語料庫，透過 App Intents 整合，讓使用者能快速調用標準學術句型（如「本研究旨在探討...」）。

## 6. 通用書目管理系統架構

系統定位為能吞吐異質數據的樞紐，而非封閉孤島。

### 6.1 數據交換標準：CSL-JSON

內部資料結構採用 **CSL-JSON**，並引入 **Citation.js** 函式庫來解析 RIS、BibTeX、EndNote XML 等格式。

* **編碼偵測**：針對台灣早期資料庫（如華藝）的 Big5 編碼 RIS 檔，需實作自動偵測與轉碼機制。

### 6.2 與 Zotero 的深度互操作性

透過 **Better BibTeX (BBT)** 插件提供的 JSON-RPC 介面與 Zotero 進行雙向通訊：

* **即時檢索**：在寫作介面直接搜尋 Zotero 文獻。
* **引文鍵同步**：確保 Citekey 一致性。

### 6.3 繁體中文姓名處理

針對 CSL 處理器常犯的姓名誤判（如將「王建國」顯示為 "Jianguo, W."），系統需檢查 `language` 標籤，若為 `zh-TW` 則鎖定姓名順序，確保輸出全名。

## 7. 複雜版面分析與 OCR 技術

### 7.1 遞迴 XY 切割演算法 (Recursive XY-Cut)

解決舊版 PDF 雙欄排版導致的文字順序錯亂問題：

1. **像素投影**：計算像素密度直方圖。
2. **尋找間隙**：識別欄間距。
3. **遞迴切割與重組**：依據學術閱讀順序重組文字區塊。

### 7.2 直排文字處理

提供「直排選取工具」，將直排影像旋轉後送入 OCR 引擎，再將標點符號轉回橫排對應格式。

---

# 第三部：技術架構與實作 (Technical Architecture)

## 8. 系統架構與實作策略

為了支撐上述體驗與功能，需採用現代化的軟體架構。

### 8.1 前端效能優化 (SwiftUI & Metal)

* **Metal Shaders**：使用 SwiftUI 的 `.colorEffect` 配合 Metal Shader Language (MSL) 渲染複雜的光效與模糊，減輕主執行緒負擔。
* **樂觀 UI (Optimistic UI)**：在 AI 生成過程中，使用預佔位符（Skeleton Screens）與串流回應（Streaming Responses）維持介面響應感。

### 8.2 並發處理模型 (Actor Model)

利用 Swift 的 Actor 模型隔離狀態，確保高並發下的數據安全：

* **Main Actor**：專責 UI 渲染。
* **Bibliography Actor**：背景處理繁重的書目解析與 Zotero 連線。
* **Vision Actor**：管理 OCR 與版面分析請求。
* **Intelligence Actor**：維護 LLM 上下文窗口與術語檢索。

### 8.3 模版引擎與格式自動化

採用內容與樣式分離架構：

* **內容層**：Markdown。
* **渲染層**：透過 Pandoc/LaTeX 後端，內建 NTU/HKU 等學府的學位論文模版（Cover, Spine, Approval），實現「一次寫作，多種輸出」。

### 8.4 安全性與隱私

* **沙盒機制**：嚴格遵守 Mac App Store 規範，配置 `com.apple.security.network.client` 以允許 localhost 連線。
* **隱私優先**：AI 推論預設在裝置端進行，雲端請求需明確授權。

## 9. 結論與戰略建議

本報告提出的架構，旨在打破現有工具的語言與互動藩籬。透過整合「流體智力」的 UI 設計、繁體中文優先的 AI 模型策略，以及強大的書目管理核心，我們將為繁體中文學者打造一把真正稱手的「數位利劍」。

1. **擁抱意圖優先設計**：讓 AI 成為協作夥伴而非單純工具。
2. **深耕在地化工藝**：從排版到術語，全面適配繁體中文學術規範。
3. **確保控制權與信任**：透過可視化狀態與差異比對，建立人機互信。

---

### 附錄：關鍵技術參考

* **Citation.js**: 書目解析核心
* **Zotero Better BibTeX**: 互操作性橋樑
* **Llama-3-Taiwan**: 繁體中文模型基準
* **Apple Vision / FoundationModels**: 終端 AI 能力
