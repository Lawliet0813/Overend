# OVEREND PDF 匯入測試計畫

> 測試日期：2025-12-28  
> 目的：驗證 PDF 元數據增強識別功能  
> 測試素材位置：`/Volumes/TEAM PD20M/MEPA27課程資料/跨域治理`

---

## 🎯 測試目標

驗證以下問題是否已修正：
1. ✅ 排除 `.indd`、`.pdf`、`.doc` 等文件名格式
2. ✅ 排除 Hex 編碼標題（`<4D69...>`）
3. ✅ 排除明顯的代碼作者（`WIN7-64`、`c295`）
4. ✅ 排除單個英文單字作者（`yang`、`administrator`）
5. ✅ 從 PDF 內容智能提取真正的標題
6. ✅ 從 PDF 內容提取中文作者姓名
7. ✅ 支援民國年轉西元年

---

## 📋 測試案例

### 測試案例 1：.indd 文件名問題

**PDF 檔案：**
```
都市更新公私合夥開發模式與參與認知特性之研究.pdf
```

**PDF 內建屬性：**
- Title: `2-2-4都市更新公私合夥開發模式與參與認知特性之研究.indd` ❌
- Author: (無)
- Year: 2005

**預期識別結果：**
- ✅ 標題：都市更新公私合夥開發模式與參與認知特性之研究
- ✅ 作者：張學聖、黃惠愉
- ✅ 年份：2005

**測試重點：**
- 系統應拒絕包含 `.indd` 的標題
- 從第一頁提取真正的中文標題
- 從第一頁提取作者（多位作者用頓號分隔）

---

### 測試案例 2：Hex 編碼標題問題

**PDF 檔案：**
```
民主治理下的政務官與事務官互動關係：以「是的，部長！」影集分析為例.pdf
```

**PDF 內建屬性：**
- Title: `<4D6963726F736F667420576F7264...>` ❌ (Hex 編碼)
- Author: `WIN7-64` ❌ (電腦名稱)
- Year: 2018

**預期識別結果：**
- ✅ 標題：民主治理下的政務官與事務官互動關係：以「是的，部長！」影集分析為例
- ✅ 作者：呂季蓉、林俐君、陳敦源
- ✅ 年份：2018

**測試重點：**
- 偵測並拒絕 Hex 編碼標題（`<...>` 格式）
- 拒絕明顯的電腦名稱作者（`WIN7-64`）
- 從文字內容提取完整標題和作者

---

### 測試案例 3：無 PDF 屬性

**PDF 檔案：**
```
網絡治理與民主課責：監控民主下的理性選擇理論觀點.pdf
```

**PDF 內建屬性：**
- Title: (無)
- Author: (無)
- Year: 2019

**預期識別結果：**
- ✅ 標題：網絡治理與民主課責：監控民主下的理性選擇理論觀點
- ✅ 作者：陳敦源、簡鈺珒
- ✅ 年份：2019

**測試重點：**
- 當 PDF 屬性完全缺失時，完全依賴內容提取
- 從第一頁提取期刊論文標題
- 從第一頁提取作者資訊

---

### 測試案例 4：單個英文單字作者（yang 問題）

**PDF 檔案：**
```
從個人風險特質探討公務人員之創新行為—以計畫行為理論為分析架構.pdf
```

**PDF 內建屬性：**
- Title: (可能是檔案名或不佳的標題)
- Author: `yang` ❌ (單個英文單字)
- Year: 2018

**預期識別結果：**
- ✅ 標題：從個人風險特質探討公務人員之創新行為—以計畫行為理論為分析架構
- ✅ 作者：楊庭安攝（或「楊庭安」）
- ✅ 年份：2018

**測試重點：**
- 拒絕單個英文單字作者（`yang`）
- 從「研究生：」標記提取真實作者
- 驗證中文姓名（2-5 個中文字）

---

## 🧪 測試步驟

### 準備工作
1. 確保 OVEREND 已編譯最新版本
2. 建立測試用文獻庫（命名為「測試庫」）

### 執行測試

**方法 1：在 OVEREND 中手動測試**
1. 打開 OVEREND
2. 依序匯入上述 4 個 PDF
3. 檢查每個書目的標題、作者、年份
4. 記錄任何識別錯誤

**方法 2：使用命令行工具預覽**
```bash
cd /Users/lawliet/OVEREND

# 測試案例 1
swift test_pdf_metadata.swift "/Volumes/TEAM PD20M/MEPA27課程資料/跨域治理/Week03_公私部門差異/都市更新公私合夥開發模式與參與認知特性之研究.pdf"

# 測試案例 2
swift test_pdf_metadata.swift "/Volumes/TEAM PD20M/MEPA27課程資料/跨域治理/Week10_政務事務關係/民主治理下的政務官與事務官互動關係：以「是的，部長！」影集分析為例.pdf"

# 測試案例 3
swift test_pdf_metadata.swift "/Volumes/TEAM PD20M/MEPA27課程資料/跨域治理/Week05_網絡治理/網絡治理與民主課責：監控民主下的理性選擇理論觀點.pdf"
```

---

## 📊 測試結果記錄表

| 測試案例 | 標題識別 | 作者識別 | 年份識別 | 整體評價 | 備註 |
|---------|---------|---------|---------|---------|------|
| 案例 1 (.indd) | ☐ ✅ ☐ ❌ | ☐ ✅ ☐ ❌ | ☐ ✅ ☐ ❌ | ☐ 通過 ☐ 失敗 | |
| 案例 2 (Hex) | ☐ ✅ ☐ ❌ | ☐ ✅ ☐ ❌ | ☐ ✅ ☐ ❌ | ☐ 通過 ☐ 失敗 | |
| 案例 3 (無屬性) | ☐ ✅ ☐ ❌ | ☐ ✅ ☐ ❌ | ☐ ✅ ☐ ❌ | ☐ 通過 ☐ 失敗 | |
| 案例 4 (yang) | ☐ ✅ ☐ ❌ | ☐ ✅ ☐ ❌ | ☐ ✅ ☐ ❌ | ☐ 通過 ☐ 失敗 | |

**通過標準：** 4 個案例中至少 3 個完全正確（標題+作者+年份都對）

---

## 🔍 常見問題排查

### 問題 1：標題仍是檔案名
**可能原因：**
- PDF 內建標題驗證規則需要調整
- 從內容提取標題的邏輯太嚴格

**檢查方式：**
```bash
swift test_pdf_metadata.swift "問題PDF路徑"
```
查看 PDF 內建屬性和前幾頁文字

### 問題 2：作者識別錯誤
**可能原因：**
- 作者格式特殊（例如：三位作者以上）
- 「研究生：」標記未被識別

**檢查方式：**
查看 PDF 第一頁是否有明確的作者資訊

### 問題 3：年份錯誤
**可能原因：**
- 民國年轉換問題
- 創建日期與發表日期不同

**檢查方式：**
確認 PDF 第一頁是否有明確的年份資訊

---

## ✅ 測試完成後

### 成功情況（≥3 個案例通過）
1. 更新 `PROGRESS.md` 記錄測試結果
2. 標記「PDF 匯入功能」為 ✅ 完成
3. 繼續開發其他功能

### 失敗情況（<3 個案例通過）
1. 記錄具體失敗案例和錯誤類型
2. 分析失敗原因
3. 調整識別邏輯
4. 重新測試

---

## 📝 測試記錄

**測試日期：** ___________  
**測試人員：** ___________  
**OVEREND 版本：** 1.1.0 (Enhanced PDF Metadata Extraction)

**測試結果：**
- [ ] 全部通過（4/4）
- [ ] 大部分通過（3/4）
- [ ] 部分通過（2/4）
- [ ] 需要改進（<2/4）

**發現的問題：**
1. 
2. 
3. 

**改進建議：**
1. 
2. 
3. 

---

**文檔版本：** 1.0  
**最後更新：** 2025-12-28
