# OVEREND UX 改善計畫

**文件版本：** 1.0  
**建立日期：** 2025-12-29  
**目的：** 記錄 UI/UX 改進建議，作為開發優化的參考指南

---

## 📋 目錄

1. [側邊欄優化](#1-側邊欄優化)
2. [文獻列表改進](#2-文獻列表改進)
3. [詳情面板強化](#3-詳情面板強化)
4. [動態工具列](#4-動態工具列)
5. [寫作中心](#5-寫作中心)
6. [專業編輯器](#6-專業編輯器)
7. [引用檢視器](#7-引用檢視器)
8. [整體 UX 優化](#8-整體-ux-優化)
9. [macOS 原生體驗](#9-macos-原生體驗)
10. [視覺細節](#10-視覺細節)
11. [優先改進清單](#11-優先改進清單)

---

## 1. 側邊欄優化

**檔案：** `Views/Sidebar/NewSidebarView.swift`

### 問題 A：視覺層級不夠明確

**現狀：**
- 三個區塊（資源管理、智能過濾、文獻庫）權重看起來差不多

**建議：**
- 「全部文獻」和「寫作中心」應該更突出（主要功能）
- 「最近閱覽」、「待讀標註」視覺上弱化（輔助功能）
- 使用不同的字重、大小或顏色區分主次

### 問題 B：缺少數量提示

**建議顯示：**
```
🏠 全部文獻 (234)
✏️ 寫作中心 (12)
🕐 最近閱覽 (8)
📋 待讀標註 (5)
```

**好處：**
- 使用者一眼就知道有多少內容
- 提供即時的資料狀態回饋

### 問題 C：「+ 新增文獻庫」位置尷尬

**現狀：**
- 放在「我的文獻庫」旁邊，容易誤解為「新增資料夾」

**建議：**
- 改名為「+ 建立新文獻庫」（更明確）
- 或考慮放在更明顯的位置（如側邊欄頂部）

### 問題 D：缺少快速操作

**建議：**
- 滑鼠移到「我的文獻庫」時，顯示「⋯」選單
- 選單包含：
  - ✏️ 重新命名
  - 📤 匯出
  - 🗑️ 刪除
  - ⚙️ 設定

---

## 2. 文獻列表改進

**檔案：** `Views/EntryList/ModernEntryListView.swift`

### 問題 A：表格欄位彈性不足

**現狀：**
- 標題可能很長，被截斷
- 作者名單如果很多人，顯示不全

**建議：**
```
[✓] 標題 (可拉寬/縮窄)    作者 (可排序)    年份    附件    類型    [...]
```

- 支援欄位拖曳調整寬度
- 記住使用者的欄位寬度偏好

### 問題 B：缺少批次操作 ⭐

**現狀：**
- 刪除 10 筆文獻要一個一個點

**建議：**
- 支援多選：
  - Shift + 點擊：連續選取
  - Cmd + 點擊：非連續選取
  - Cmd + A：全選
- 多選後出現批次操作列：
  ```
  已選取 5 筆  [🗑️ 刪除] [📤 匯出] [🏷️ 加標籤] [⭐ 標記]
  ```

### 問題 C：視覺上太單調

**建議視覺提示：**
- ⭐ 星號標記的文獻：金色底色或左側金色邊條
- 📩 未讀文獻：粗體標題
- 📎 有附件的文獻：PDF 圖示更明顯（可加顏色）
- 🔖 有標籤的文獻：顯示標籤顏色點

### 問題 D：缺少快速預覽

**建議：**
- 滑鼠懸停文獻時，顯示懸浮卡片
- 卡片內容：
  - 摘要前 100 字
  - 關鍵字
  - DOI 連結
  - 附件數量

### 問題 E：排序與篩選不明顯

**建議：**
- 欄位標題可點擊排序：
  - 點一次：遞增 ↑
  - 點兩次：遞減 ↓
  - 點三次：取消排序
- 右上角加「🔍 篩選」按鈕：
  - 依年份範圍
  - 依文獻類型（期刊、書籍、會議）
  - 依標籤
  - 依是否有附件

---

## 3. 詳情面板強化

**檔案：** `Views/EntryDetail/ModernEntryDetailView.swift`

### 問題 A：引用格式切換不順暢

**現狀：**
- 「APA 7th / MLA 9th」兩個選項
- 未來支援更多格式會很擁擠

**建議改成下拉選單：**
```
引用格式
┌─────────────────┐
│ ✓ APA 7th       │
│   MLA 9th       │
│   Chicago 17th  │
│   IEEE          │
│   Harvard       │
└─────────────────┘
```

### 問題 B：「複製」按鈕不夠明顯

**現狀：**
- 複製是高頻操作，但按鈕不突出

**建議：**
- 放大按鈕
- 改成「📋 複製引用」（帶圖示）
- 複製後顯示 Toast：「✓ 引用已複製」

### 問題 C：缺少「編輯」入口

**現狀：**
- 發現書目資訊有錯，不知道在哪裡編輯

**建議：**
- 詳情面板右上角加「✏️ 編輯」按鈕
- 點擊後直接進入書目編輯器

### 問題 D：附件區塊資訊不足

**現狀：**
```
□ paper.pdf
```

**建議豐富化：**
```
📄 paper.pdf (2.3 MB)
   上傳時間：2024-12-25
   頁數：12 頁
   [開啟] [下載] [刪除]
```

### 問題 E：缺少「相關文獻」推薦

**進階功能建議：**
- 底部顯示「與此文獻相似的有 3 篇」
- 依據：相同作者、相同關鍵字、相同期刊
- 點擊後跳到那些文獻

---

## 4. 動態工具列

**檔案：** `Views/Common/DynamicToolbar.swift`

### 問題 A：缺少「麵包屑」導航

**建議顯示當前位置：**
```
全部文獻 > 2024 年論文 > 選取了 3 筆
```

**好處：**
- 使用者不會迷路
- 清楚知道目前在哪裡

### 問題 B：搜尋功能應該常駐

**建議：**
- 工具列右側永遠有搜尋框（可收合）
- 快捷鍵：`Cmd + F`
- 支援模糊搜尋（標題、作者、年份、DOI）

### 問題 C：視圖切換可以更直覺

**建議工具列加入視圖切換：**
```
[📋 列表] [🎴 卡片] [📅 時間軸]
```

- 不用只依賴側邊欄切換
- 提供更直覺的視圖控制

---

## 5. 寫作中心

**檔案：** `Views/Writer/EditorListView.swift`

### 問題 A：卡片資訊太少

**現狀顯示：**
- 標題
- 最後修改時間

**建議增加：**
```
┌─────────────────────────┐
│ 論文標題                │
│                         │
│ 1,234 字 | 引用 5 篇   │
│ 最後修改：2 小時前      │
│ 📝 草稿                 │
└─────────────────────────┘
```

- 字數統計（追蹤進度）
- 引用數量（知道用了幾篇文獻）
- 預覽前幾行文字（懸停顯示）
- 狀態標籤（草稿、修改中、已完成）

### 問題 B：缺少排序選項

**建議右上角加入：**
```
排序：[最近修改 ▼] [建立時間] [標題] [字數]
```

### 問題 C：新增文稿按鈕不明顯

**建議：**
- 中間放一個大大的「+ 新增文稿」卡片（虛線框）
- 或是右上角固定「+ 新文稿」按鈕（綠色 `#00D97E`）

### 問題 D：缺少範本選擇

**建議點「新增文稿」時顯示對話框：**
```
┌─────────────────────────┐
│ 選擇範本                │
│                         │
│ □ 空白文件              │
│ □ APA 格式論文          │
│ □ 期刊投稿              │
│ □ 會議論文              │
│ □ 從匯入的文獻建立      │
└─────────────────────────┘
```

---

## 6. 專業編輯器

**檔案：** `Views/Writer/ProfessionalEditorView.swift`

### 問題 A：格式工具列功能不足

**建議增加：**
- 段落樣式下拉選單（內文、標題 1-6、引文、程式碼）
- 對齊方式（左、中、右、兩端對齊）
- 項目符號樣式（圓點、數字、字母、自訂）
- 插入表格
- 插入圖片（從檔案或附件）
- 插入腳註/尾註

### 問題 B：缺少「專注模式」

**建議：**
- 快捷鍵：`Cmd + Shift + F`
- 進入全螢幕，隱藏所有面板
- 只剩下編輯區和一個浮動工具列
- 背景可選擇（純白、米色、深色）
- 類似 iA Writer 的體驗

### 問題 C：引用插入流程可以更順 ⭐

**現狀：**
- 要打開引用檢視器 → 搜尋 → 插入

**建議改成 @ 快速插入：**
- 打字時，輸入 `@` 自動彈出文獻搜尋框
- 類似 Notion 的 @ mention 功能
- 例如：輸入 `@smith` 立刻顯示所有 Smith 的文獻
- 上下鍵選擇，Enter 插入
- Esc 取消

**流程範例：**
```
使用者打字：根據 @sm
        ↓
自動彈出：
┌─────────────────────┐
│ @ Smith (2023)      │ ← 選取
│ @ Smith (2020)      │
│ @ Smithson (2024)   │
└─────────────────────┘
        ↓
插入：根據 Smith (2023)
```

### 問題 D：缺少字數統計儀表板

**建議右下角固定顯示：**
```
┌─────────────────┐
│ 1,234 字        │
│ 5 段落          │
│ 3 引用          │
│ 預計 5 頁       │
└─────────────────┘
```

- 即時更新
- 可點擊展開詳細統計（各章節字數）

### 問題 E：版本控制提示不明顯

**建議：**
- 頂部中央顯示：「✓ 已自動儲存（3 秒前）」
- 儲存中顯示：「💾 儲存中...」
- 點擊可查看版本歷史
- 支援還原到特定版本

---

## 7. 引用檢視器

**檔案：** `Views/Writer/CitationInspector.swift`

### 問題 A：搜尋框應該更突出

**建議：**
- 放在最上面
- 佔滿整個寬度
- 使用較大的字體（16pt）
- Placeholder：「搜尋文獻... (標題、作者、年份)」

### 問題 B：篩選條件太少

**建議增加快速篩選按鈕：**
```
[全部] [已引用] [未引用] [⭐標記]
[最近使用] [依年份] [依作者]
```

### 問題 C：應支援拖曳插入

**建議：**
- 可以拖曳文獻到編輯器
- 拖曳時顯示引用預覽
- 放開滑鼠時插入引用

### 問題 D：缺少「已引用」標記

**建議：**
```
文獻列表顯示：
✓ Smith (2023) - 已引用 2 次
  Johnson (2022)
  ⭐ Lee (2024) - 已引用 1 次
```

- 綠色勾勾表示已引用
- 顯示引用次數
- 點擊可跳到文中引用位置

---

## 8. 整體 UX 優化

### A. 一致性問題

#### 顏色使用規範

**當前問題：**
- 主色 `#00D97E` 綠色可能到處都是

**建議：**
- 🟢 主色只用在主要操作按鈕（新增、確認、儲存）
- 🔴 紅色用於刪除、錯誤、警告
- 🔵 藍色用於編輯、資訊、次要操作
- 🟡 黃色用於提醒、待辦
- 🟣 紫色用於特殊功能（AI、進階）

#### 圖示風格統一

**確保：**
- 所有圖示來自 SF Symbols
- 粗細一致（統一使用 Regular 或 Medium）
- 大小一致（工具列 20pt、側邊欄 18pt、列表 16pt）

#### 間距系統

**嚴格遵守 8px 網格：**
- 元件間距：8, 16, 24, 32, 48, 64
- 內距（padding）：8, 12, 16, 24
- 外距（margin）：16, 24, 32

### B. 回饋機制不足 ⭐

#### Toast 提示

**操作完成後應該有提示：**
```
✓ 已匯入 5 篇文獻
✓ 引用已複製到剪貼簿
✓ 文稿已儲存
✓ 已刪除 3 筆文獻
⚠️ 部分 PDF 匯入失敗（2 個檔案）
❌ 網路連線失敗，請稍後再試
```

**位置：**
- 右上角淡入淡出
- 顯示 3 秒後自動消失
- 可點擊關閉

#### 載入狀態

**長時間操作顯示進度：**
- DOI 查詢：「🔍 查詢中...」
- PDF 匯入：「📥 匯入中... (3/10)」
- 匯出文件：「📤 產生 PDF... 80%」

#### 空狀態設計

**文獻庫是空的時候：**
```
┌─────────────────────────┐
│   📚                    │
│   還沒有文獻            │
│   拖曳 PDF 或 BibTeX    │
│   開始建立你的文獻庫    │
│                         │
│   [+ 新增文獻]          │
└─────────────────────────┘
```

**寫作中心是空的時候：**
```
┌─────────────────────────┐
│   ✏️                    │
│   開始你的第一篇文稿    │
│                         │
│   [+ 新增文稿]          │
└─────────────────────────┘
```

### C. 快捷鍵提示

**關鍵操作應該顯示快捷鍵：**
```
檔案選單：
  新增文稿        ⌘N
  開啟...         ⌘O
  儲存            ⌘S
  另存新檔...     ⌘⇧S

編輯選單：
  復原            ⌘Z
  重做            ⌘⇧Z
  搜尋            ⌘F
  取代            ⌘⌥F

插入選單：
  插入引用        ⌘⇧C
  插入腳註        ⌘⌥F
  插入圖片        ⌘⌥I

視窗選單：
  專注模式        ⌘⇧F
  顯示側邊欄      ⌘⌥S
  顯示檢視器      ⌘⌥I
```

### D. 深色模式適配

**檢查清單：**
- [ ] 所有顏色在深色模式下對比度足夠（WCAG AA 標準）
- [ ] 綠色 `#00D97E` 在黑底上是否太亮？
- [ ] 建議：深色模式用 `#00C070`（稍微暗一點）
- [ ] 陰影在深色模式下改用發光效果
- [ ] 所有圖示在深色背景下清晰可見

---

## 9. macOS 原生體驗

### A. 右鍵選單 ⭐

#### 文獻列表右鍵選單

**右鍵點擊文獻應該出現：**
```
✏️ 編輯書目
📋 複製 APA 引用
📋 複製 MLA 引用
📋 複製 BibTeX
🔗 開啟 DOI 連結
📄 開啟 PDF
⭐ 標記/取消標記
🏷️ 加入標籤...
📁 移動到資料夾...
────────────────
🗑️ 刪除
```

#### 編輯器右鍵選單

**右鍵點擊編輯區應該出現：**
```
✂️ 剪下         ⌘X
📋 複製         ⌘C
📄 貼上         ⌘V
────────────────
🔤 拼字與文法
📚 查詢與資料來源...
────────────────
📌 插入引用     ⌘⇧C
🔢 插入腳註     ⌘⌥F
🖼️ 插入圖片     ⌘⌥I
```

### B. 拖曳操作

**應支援：**
- 拖曳文獻到資料夾（分類整理）
- 拖曳 PDF 檔案到 App（匯入）
- 拖曳文獻到編輯器（插入引用）
- 拖曳圖片到編輯器（插入圖片）
- 拖曳資料夾（排序）

### C. 多視窗支援

**建議：**
- 支援同時開啟多個編輯器視窗
- 快捷鍵：`Cmd + N`（新視窗）
- 方便對照不同文稿
- 每個視窗獨立狀態

### D. 原生整合（未來）

**長期規劃：**
- Spotlight 整合（可搜尋文獻）
- Quick Look 預覽支援（空白鍵預覽文獻）
- Share Extension（從 Safari 直接加入文獻）
- Handoff 支援（跨裝置接續編輯）

---

## 10. 視覺細節

### A. 陰影與深度

**建議使用 Material Design Elevation：**
```
Level 0: 無陰影（背景）
Level 1: 微妙陰影（按鈕 hover）
  box-shadow: 0 1px 2px rgba(0,0,0,0.08)

Level 2: 輕微陰影（卡片）
  box-shadow: 0 2px 4px rgba(0,0,0,0.12)

Level 4: 明顯陰影（浮動面板）
  box-shadow: 0 4px 8px rgba(0,0,0,0.16)

Level 8: 強烈陰影（對話框）
  box-shadow: 0 8px 16px rgba(0,0,0,0.20)
```

**深色模式陰影：**
- 改用發光效果（glow）
- 或使用更淺的陰影顏色

### B. 動畫過渡

**建議加入微動畫：**
```
側邊欄展開/收合：
  duration: 250ms
  easing: ease-in-out

詳情面板彈出：
  duration: 200ms
  easing: ease-out
  from: translateX(100%)
  to: translateX(0)

刪除確認對話框：
  duration: 150ms
  easing: ease-out
  opacity: 0 → 1

按鈕點擊：
  duration: 100ms
  transform: scale(0.95)
```

**原則：**
- 時長：150-300ms（不要太慢）
- 可以提供關閉動畫選項（偏好設定）
- 避免妨礙快速操作

### C. 字體層級

**統一字體規範：**
```
特大標題：  28pt Bold       (主標題、空狀態)
大標題：    24pt Bold       (區塊標題)
中標題：    20pt Semibold   (子標題)
小標題：    18pt Semibold   (卡片標題)
正文：      16pt Regular    (主要內容)
說明文字：  14pt Regular    (輔助說明)
小字：      12pt Regular    (時間戳記、提示)
```

**顏色搭配：**
```
標題：      textPrimary   (#212121 / #FFFFFF)
正文：      textPrimary   (#212121 / #FFFFFF)
說明：      textSecondary (#757575 / #B0B0B0)
輔助：      textMuted     (#9E9E9E / #808080)
```

### D. 圖示大小統一

**建議規範：**
```
工具列圖示：    20pt
側邊欄圖示：    18pt
列表圖示：      16pt
按鈕圖示：      16pt
狀態圖示：      14pt
```

**粗細：**
- 統一使用 SF Symbols Regular
- 特別強調處使用 Medium

---

## 11. 優先改進清單

### 🔴 高優先（P0）- 影響核心使用體驗

**預計 2-3 週完成**

1. **批次操作功能**
   - 多選文獻（Shift + 點擊、Cmd + 點擊）
   - 批次刪除、匯出、加標籤
   - 工作量：3 天

2. **@ 快速插入引用**
   - 輸入 @ 觸發文獻搜尋
   - 模糊搜尋匹配
   - 工作量：4 天

3. **Toast 提示系統**
   - 操作成功/失敗提示
   - 右上角淡入淡出
   - 工作量：2 天

4. **空狀態設計**
   - 文獻庫空狀態
   - 寫作中心空狀態
   - 引導新使用者
   - 工作量：2 天

5. **數量統計顯示**
   - 側邊欄項目顯示數量
   - 文稿卡片顯示字數、引用數
   - 工作量：2 天

**小計：13 天（約 2 週）**

---

### 🟡 中優先（P1）- 提升專業感

**預計 3-4 週完成**

6. **右鍵選單**
   - 文獻列表右鍵選單
   - 編輯器右鍵選單
   - 工作量：3 天

7. **快捷鍵顯示與支援**
   - 選單顯示快捷鍵
   - 實作所有快捷鍵
   - 工作量：4 天

8. **排序與篩選**
   - 欄位可點擊排序
   - 進階篩選功能
   - 工作量：4 天

9. **載入狀態指示**
   - DOI 查詢進度
   - PDF 匯入進度
   - 工作量：2 天

10. **拖曳操作支援**
    - 拖曳 PDF 匯入
    - 拖曳文獻插入引用
    - 工作量：4 天

11. **詳情面板優化**
    - 引用格式下拉選單
    - 編輯按鈕
    - 附件詳細資訊
    - 工作量：3 天

**小計：20 天（約 3 週）**

---

### 🟢 低優先（P2）- 錦上添花

**預計 4-6 週完成**

12. **專注模式**
    - 全螢幕編輯
    - 隱藏所有面板
    - 工作量：3 天

13. **字數統計儀表板**
    - 即時字數統計
    - 詳細統計面板
    - 工作量：2 天

14. **版本歷史**
    - 自動儲存版本
    - 版本對比
    - 還原功能
    - 工作量：5 天

15. **相關文獻推薦**
    - 演算法開發
    - UI 整合
    - 工作量：5 天

16. **範本系統**
    - 內建範本
    - 自訂範本
    - 工作量：4 天

17. **多視窗支援**
    - 獨立編輯器視窗
    - 視窗狀態管理
    - 工作量：4 天

18. **動畫過渡**
    - 各種微動畫
    - 效能優化
    - 工作量：3 天

**小計：26 天（約 4 週）**

---

## 📊 開發時程建議

### 第一階段（2 週）- 核心體驗優化
```
Week 1:
  批次操作 (3天)
  @ 快速插入 (2天)

Week 2:
  Toast 提示 (2天)
  空狀態設計 (2天)
  數量統計 (1天)
```

### 第二階段（3 週）- 專業功能補齊
```
Week 3-4:
  右鍵選單 (3天)
  快捷鍵 (4天)
  排序篩選 (3天)

Week 5:
  載入狀態 (2天)
  拖曳操作 (3天)
```

### 第三階段（4 週）- 進階功能
```
Week 6-9:
  專注模式、字數統計
  版本歷史、相關推薦
  範本系統、多視窗
  動畫優化
```

---

## ✅ 驗收標準

### 批次操作
- [ ] 可以 Shift + 點擊連續選取
- [ ] 可以 Cmd + 點擊非連續選取
- [ ] 多選後顯示操作列
- [ ] 批次刪除需要確認對話框

### @ 快速插入引用
- [ ] 輸入 @ 自動彈出搜尋框
- [ ] 支援模糊搜尋（作者、標題、年份）
- [ ] 上下鍵選擇、Enter 插入、Esc 取消
- [ ] 插入後引用格式正確

### Toast 提示
- [ ] 操作成功顯示綠色 Toast
- [ ] 操作失敗顯示紅色 Toast
- [ ] 3 秒後自動消失
- [ ] 可點擊提前關閉

### 空狀態設計
- [ ] 文獻庫空時顯示引導
- [ ] 寫作中心空時顯示引導
- [ ] 包含插圖和操作按鈕
- [ ] 文案清晰友善

---

## 📝 設計原則提醒

### 一致性
- 使用統一的顏色、字體、間距系統
- 所有圖示來自同一套 icon set
- 互動行為保持一致

### 回饋性
- 所有操作都要有明確回饋
- 載入狀態清楚可見
- 錯誤訊息具體可操作

### 效率性
- 支援鍵盤快捷鍵
- 高頻操作一鍵完成
- 減少點擊次數

### 容錯性
- 重要操作需要確認
- 提供撤銷機制
- 自動儲存防止資料遺失

### 美觀性
- 留白充足，不擁擠
- 視覺層級清晰
- 細節打磨到位

---

## 🔄 持續改進

### 收集使用者回饋
- Beta 測試階段記錄所有問題
- 上架後設置回饋管道
- 定期檢視常見問題

### 迭代優化
- 每兩週一次小更新
- 每月一次功能更新
- 根據數據調整優先級

### 效能監控
- 追蹤 App 啟動速度
- 監控記憶體使用
- 優化卡頓問題

---

**文件結束**

**下次更新：** 完成 P0 功能後  
**維護者：** 彥儒  
**專案位置：** `/Users/lawliet/OVEREND/`
