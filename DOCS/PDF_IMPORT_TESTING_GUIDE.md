# PDF 匯入測試指南

## 🧪 如何測試 PDF 匯入優化

### 準備測試檔案

建議準備以下類型的 PDF 進行測試：

#### 1. **台灣學術論文**

- 國立政治大學碩博士論文
- 台灣期刊論文（使用民國年）
- 政府報告（可能有特殊格式）

#### 2. **國際期刊論文**

- IEEE/ACM Conference Papers
- Springer/Elsevier Journal Articles
- Nature/Science 論文

#### 3. **特殊案例**

- 多作者論文（>5 位作者）
- 無DOI的論文
- 掃描版PDF（OCR文字）
- 非標準格式的報告

---

## 📝 測試步驟

### 測試 1：基本匯入功能

1. 開啟 OVEREND
2. 選擇或建立一個文獻庫
3. 點擊「匯入 PDF」
4. 選擇一個測試 PDF 檔案
5. 觀察匯入結果

**檢查項目：**

- [ ] PDF 是否成功匯入
- [ ] 作者欄位是否正確填入
- [ ] 標題是否正確（不是檔案名稱）
- [ ] 年份是否正確
- [ ] PDF 附件是否可以開啟

### 測試 2：DOI 識別

使用有 DOI 的論文進行測試：

**預期行為：**

1. 系統會先掃描 PDF 前 5 頁尋找 DOI
2. 如果找到 DOI，會顯示 "找到 DOI: xxx" 訊息
3. 系統會使用 DOI 從 CrossRef 查詢完整元數據
4. 如果 CrossRef 成功，會顯示完整的論文資訊

**測試 DOI 格式：**

- `doi: 10.1234/example`
- `DOI: 10.1234/example`
- `https://doi.org/10.1234/example`
- `10.1234/example`（純DOI）

### 測試 3：無 DOI 的增強識別

使用沒有 DOI 的論文進行測試：

**預期行為：**

1. 系統偵測不到 DOI
2. 自動使用增強版元數據提取
3. 從 PDF 內容中提取作者、標題、年份

**重點觀察：**

- 作者是否正確提取（包括中文姓名）
- 標題是否正確（不是期刊名或會議名）
- 年份是否正確（包括民國年轉換）

### 測試 4：批量匯入

1. 一次選擇 5-10 個 PDF
2. 批量匯入
3. 檢查每個 PDF 的元數據品質

---

## 🔍 常見問題排查

### 問題 1：作者顯示 "Unknown"

**可能原因：**

- PDF 是掃描版（OCR 品質差）
- 作者格式特殊（無法辨識）
- PDF 前 2000 字元內沒有作者資訊

**解決方式：**

- 檢查 Xcode Console 的 log 訊息
- 手動編輯書目補充作者資訊

### 問題 2：標題是檔案名稱

**可能原因：**

- PDF 沒有內建 title 屬性
- PDF 格式特殊（無法從文字提取）
- 標題在第 6 頁之後

**解決方式：**

- 手動編輯標題
- 檢查 PDF 是否可以用 Preview 複製文字

### 問題 3：年份錯誤

**可能原因：**

- PDF 中有多個年份（選到錯誤的）
- 民國年轉換失敗
- PDF creation date 與發表年份不同

**解決方式：**

- 檢查 log 看系統識別到哪個年份
- 手動修正年份

---

## 📊 效果對比測試

建議記錄以下數據：

### 測試表格

| PDF 類型 | 檔案名稱 | 作者正確? | 標題正確? | 年份正確? | DOI識別? | 備註 |
|---------|---------|----------|----------|----------|---------|------|
| 台灣論文 | thesis1.pdf | ✅ | ✅ | ✅ (民國→西元) | ❌ | 無DOI |
| IEEE論文 | paper1.pdf | ✅ | ✅ | ✅ | ✅ | 完美 |
| 期刊論文 | article1.pdf | ⚠️ (部分) | ✅ | ✅ | ✅ | 只抓到第一作者 |

### 統計指標

- **作者識別率** = (作者正確數 / 總數) × 100%
- **標題識別率** = (標題正確數 / 總數) × 100%
- **年份識別率** = (年份正確數 / 總數) × 100%
- **DOI識別率** = (DOI識別數 / 有DOI的總數) × 100%

---

## 🐛 回報問題

如果發現識別錯誤，請記錄：

1. **PDF 資訊**
   - 檔案名稱
   - PDF 來源（期刊、會議、學校）
   - 是否為掃描版

2. **錯誤資訊**
   - 預期的作者、標題、年份
   - 實際識別到的資訊
   - Console log 訊息

3. **PDF 樣本**
   - 如果可以，提供 PDF 的前 3 頁截圖
   - 標註作者、標題、年份的位置

---

## ✅ 測試清單

- [ ] 測試台灣論文（含民國年）
- [ ] 測試國際期刊論文
- [ ] 測試會議論文
- [ ] 測試無 DOI 的論文
- [ ] 測試批量匯入（10+ PDF）
- [ ] 測試各種 DOI 格式
- [ ] 測試中文作者姓名
- [ ] 測試英文作者姓名
- [ ] 測試混合作者列表
- [ ] 測試特殊符號作者
- [ ] 測試 PDF 內建屬性提取
- [ ] 測試掃描版 PDF
- [ ] 記錄識別成功率
- [ ] 與舊版對比

---

## 📈 預期改善

### 舊版問題

1. ❌ 作者常常顯示 "Unknown"
2. ❌ 標題常常是檔案名稱
3. ❌ 年份識別不穩定
4. ❌ DOI 識別遺漏部分格式

### 新版改善

1. ✅ 作者識別率提升到 80%+
2. ✅ 標題識別率提升到 90%+
3. ✅ 年份識別率提升到 85%+（含民國年）
4. ✅ DOI 識別率提升到 95%+

---

## 📋 測試記錄與分析 (Notion)

為了標準化測試結果，請使用我們設計的 Notion 資料庫模板來記錄每次測試的詳細數據。

### 1. 啟用自動記錄

1. 進入 OVEREND 的 **Settings** > **Notion**。
2. 填入您的 **API Key** 和 **Database ID**。
3. 啟用 **"匯入 PDF 時自動建立測試記錄"**。

### 2. 分析數據正確性

當您匯入 PDF 後，Notion 資料庫會自動建立一筆新記錄。請按照以下步驟進行分析：

1. **開啟 Notion 記錄**：點擊新建立的頁面。
2. **查看系統提取結果**：在頁面內容中，展開 **"📝 系統提取結果"** 區塊。
3. **比對原始文件**：打開原始 PDF 文件，比對系統提取的標題、作者、年份等資訊是否正確。
4. **填寫準確度評分**：
   - 在 **"📊 準確度評分"** 區塊（或資料庫屬性中），填寫各項目的評分。
   - 建議評分標準：
     - **標題 (30%)**：完全正確 10 分，部分正確 5 分，錯誤 0 分。
     - **作者 (30%)**：完全正確 10 分，部分遺漏 5 分，錯誤 0 分。
     - **年份 (20%)**：完全正確 10 分，錯誤 0 分。
     - **DOI (20%)**：完全正確 10 分，錯誤 0 分。
5. **記錄問題**：如果有錯誤，請在 **"🔍 問題與觀察"** 區塊記錄失敗原因（例如：OCR 品質差、特殊排版）。
6. **查看整體準確度**：Notion 模板會根據您的評分自動計算 **"整體準確度 %"**。

👉 **[查看詳細模板規格](PDF_EXTRACTION_TEST_RECORD_TEMPLATE.md)**
